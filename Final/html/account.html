<!--A Design by W3layouts 
Author: W3layout
Author URL: http://w3layouts.com
License: Creative Commons Attribution 3.0 Unported
License URL: http://creativecommons.org/licenses/by/3.0/
-->
<!DOCTYPE html>
<html>
<head>
<!--<title>Wedding Store A Ecommerce Category Flat Bootstrap Responsive Website Template | Account :: w3layouts</title>-->
<link href="css/bootstrap.css" rel="stylesheet" type="text/css" media="all" />
<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
<script src="js/jquery.min.js"></script>
<script src="../node_modules/web3/dist/web3.min.js"></script>
<!-- Custom Theme files -->
<!--theme-style-->
<link href="css/style.css" rel="stylesheet" type="text/css" media="all" />	
<!--//theme-style-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Wedding Store Responsive web template, Bootstrap Web Templates, Flat Web Templates, Andriod Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyErricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- start menu -->
<script src="js/simpleCart.min.js"> </script>
<!-- start menu -->
<link href="css/memenu.css" rel="stylesheet" type="text/css" media="all" />
<script type="text/javascript" src="js/memenu.js"></script>
<script>$(document).ready(function(){$(".memenu").memenu();});</script>	
<!-- /start menu -->
</head>
<body onload="getMyAddress(); reloadTable()"> 
<!--header-->

<br>
<br>

<div class="top_bg">

    
    <div class="container">
        <div class="header_top-sec">
            <div class="top_right">
                <!--<ul>
                    <li><a href="#">help</a></li>|
                    <li><a href="contact.html">Contact</a></li>|
                    
                    <li><a href="login.html">Track Order</a></li>
                </ul>-->
                <div class="logo">
                    <h1>Manufacturer Signup Page</h1>
                </div>
            </div>
            <div class="top_left">
                <!--<ul>
                    <li class="top_link">Email:<a href="mailto:info@example.com">mail@example.com</a></li>|
                    <li class="top_link"><a href="login.html">My Account</a></li>               
                </ul>-->
            </div>
                <div class="clearfix"> </div>
        </div>
    </div>
</div>
<div class="header-top">
	 <div class="header-bottom">
		 <div class="container">			
				
			 <!---->
		 
			 <div class="top-nav">
				<!--<ul class="memenu skyblue"><li class="active"><a href="index.html">Home</a></li>
					<li class="grid"><a href="#">Wedding</a>
						<div class="mepanel">
							<div class="row">
								<div class="col1 me-one">
									<h4>Shop</h4>
									<ul>
										<li><a href="product.html">New Arrivals</a></li>
										<li><a href="product.html">Men</a></li>
										<li><a href="product.html">Women</a></li>
										<li><a href="product.html">Accessories</a></li>
										<li><a href="product.html">Kids</a></li>
										<li><a href="login.html">login</a></li>
										<li><a href="product.html">Brands</a></li>
										<li><a href="product.html">My Shopping Bag</a></li>
									</ul>
								</div>
								<div class="col1 me-one">
									<h4>Style Zone</h4>
									<ul>
										<li><a href="product.html">Men</a></li>
										<li><a href="product.html">Women</a></li>
										<li><a href="product.html">Brands</a></li>
										<li><a href="product.html">Kids</a></li>
										<li><a href="product.html">Accessories</a></li>
										<li><a href="product.html">Style Videos</a></li>
									</ul>	
								</div>
								<div class="col1 me-one">
									<h4>Popular Brands</h4>
									<ul>
										<li><a href="product.html">Levis</a></li>
										<li><a href="product.html">Persol</a></li>
										<li><a href="product.html">Nike</a></li>
										<li><a href="product.html">Edwin</a></li>
										<li><a href="product.html">New Balance</a></li>
										<li><a href="product.html">Jack & Jones</a></li>
										<li><a href="product.html">Paul Smith</a></li>
										<li><a href="product.html">Ray-Ban</a></li>
										<li><a href="product.html">Wood Wood</a></li>
									</ul>	
								</div>
							</div>
						</div>
					</li>
					<li class="grid"><a href="#">Bride Style</a>
						<div class="mepanel">
							<div class="row">
								<div class="col1 me-one">
									<h4>Shop</h4>
									<ul>
										<li><a href="product.html">New Arrivals</a></li>
										<li><a href="product.html">Men</a></li>
										<li><a href="product.html">Women</a></li>
										<li><a href="product.html">Accessories</a></li>
										<li><a href="product.html">Kids</a></li>
										<li><a href="login.html">login</a></li>
										<li><a href="product.html">Brands</a></li>
										<li><a href="product.html">My Shopping Bag</a></li>
									</ul>
								</div>
								<div class="col1 me-one">
									<h4>Style Zone</h4>
									<ul>
										<li><a href="product.html">Men</a></li>
										<li><a href="product.html">Women</a></li>
										<li><a href="product.html">Brands</a></li>
										<li><a href="product.html">Kids</a></li>
										<li><a href="product.html">Accessories</a></li>
										<li><a href="product.html">Style Videos</a></li>
									</ul>	
								</div>
								<div class="col1 me-one">
									<h4>Popular Brands</h4>
									<ul>
										<li><a href="product.html">Levis</a></li>
										<li><a href="product.html">Persol</a></li>
										<li><a href="product.html">Nike</a></li>
										<li><a href="product.html">Edwin</a></li>
										<li><a href="product.html">New Balance</a></li>
										<li><a href="product.html">Jack & Jones</a></li>
										<li><a href="product.html">Paul Smith</a></li>
										<li><a href="product.html">Ray-Ban</a></li>
										<li><a href="product.html">Wood Wood</a></li>
									</ul>	
								</div>
							</div>
						</div>
					</li>
					<li class="grid"><a href="typo.html">Typo</a></li>
					<li class="grid"><a href="contact.html">Contact</a></li>
				</ul>-->
				<div class="clearfix"> </div>
			 </div>
			 <!---->
			 <div class="cart box_1">
				<!-- <a href="checkout.html">
					<h3> <div class="total">
					<span class="simpleCart_total"></span> (<span id="simpleCart_quantity" class="simpleCart_quantity"></span>)</div>
					<span class="glyphicon glyphicon-shopping-cart" aria-hidden="true"></span></h3>
				</a>-->
				<!--<p><a href="javascript:;" class="simpleCart_empty">Empty Cart</a></p>-->
			 	<div class="clearfix"> </div>
			 </div>
			 <div class="clearfix"> </div>
			 <!---->			 
			 </div>
			<div class="clearfix"> </div>
	  </div>
</div>
<!---->
<div class="container">
	  
	 <div class="registration">
		 <div class="registration_left">
			 <h2 style="color: rgb(243, 239, 239);">new manufacturer?  create an account </h2>
			 <!-- [if IE] 
				< link rel='stylesheet' type='text/css' href='ie.css'/>  
			 [endif] -->  
			  
			 <!-- [if lt IE 7]>  
				< link rel='stylesheet' type='text/css' href='ie6.css'/>  
			 <! [endif] -->  

			 <div class="registration_form">
			 <!-- Form -->
				<!--<form id="registration_form" >-->
				
					<div>
						<label>
							<input placeholder="Manufacturer name:" id = "manuName" type="text" tabindex="1" required autofocus>
						</label>
					</div>
					<!--<div>
						<label>
							<input placeholder="last name:" type="text" tabindex="2" required autofocus>
						</label>
					</div>-->
					<div>
						<label>
							<input placeholder="email address:" type="text"  required>
						</label>
					</div>
					<div>
						<label>
							<input placeholder="Mobile:" type="text" required>
						</label>
					</div>					
						<!--<div class="sky_form1">
							<ul>
								<li><label class="radio left"><input type="radio" name="radio" checked=""><i></i>Male</label></li>
								<li><label class="radio"><input type="radio" name="radio"><i></i>Female</label></li>
								<div class="clearfix"></div>
							</ul>
						</div>	-->				
					<div>
						<label>
							<input placeholder="password" type="password" tabindex="4" required>
						</label>
					</div>						
					<div>
						<label>
							<input placeholder="retype password" type="password" tabindex="4" required>
						</label>
					</div>	
					<div>
					<!--	<input type="submit" value="create an account" id="register-submit">-->
						<button class="btn btn-success btn-lg" id="button3" style="width:100%;display:block"> Signup Company</button>
				
					</div>
					<!--<div class="sky-form">
						<label class="checkbox"><input type="checkbox" name="checkbox" ><i></i>i agree to mobilya.com &nbsp;<a class="terms" href="#"> terms of service</a> </label>
					</div>-->
				
				<!-- /Form -->
			 </div>
		 </div>
		<!--<div class="registration_left">
			 <h2>existing user</h2>
			 <div class="registration_form">
			 <!-- Form 
				<form id="registration_form" action="" method="post">
					<div>
						<label>
							<input placeholder="email:" type="email" tabindex="3" required>
						</label>
					</div>
					<div>
						<label>
							<input placeholder="password" type="password" tabindex="4" required>
						</label>
					</div>						
					<div>
						<input type="submit" value="sign in" id="register-submit">
					</div>
					<div class="forget">
						<a href="#">forgot your password</a>
					</div>
				</form>
			  /Form -->
			 </div>
		 </div>
		 <div class="clearfix"></div>
	 </div>
</div>
<!---->
<!--<div class="shoping">
	 <div class="container">
		 <div class="shpng-grids">
			 <div class="col-md-4 shpng-grid">
				 <h3>Free Shipping</h3>
				 <p>On Order Over Rs999</p>
			 </div>
			 <div class="col-md-4 shpng-grid">
				 <h3>Order Return</h3>
				 <p>Return Within 14days</p>
			 </div>
			 <div class="col-md-4 shpng-grid">
				 <h3>COD</h3>
				 <p>Cash On Delivery</p>
			 </div>
			 <div class="clearfix"></div>
		 </div>
	 </div>
</div>-->
<!---->
<div class="footer">
	 <!--<div class="container">
		 <div class="ftr-grids">
			 <div class="col-md-3 ftr-grid">
				 <h4>About Us</h4>
				 <ul>
					 <li><a href="#">Who We Are</a></li>
					 <li><a href="contact.html">Contact Us</a></li>
					 <li><a href="#">Our Sites</a></li>
					 <li><a href="#">In The News</a></li>
					 <li><a href="#">Team</a></li>
					 <li><a href="#">Careers</a></li>					 
				 </ul>
			 </div>
			 <div class="col-md-3 ftr-grid">
				 <h4>Customer service</h4>
				 <ul>
					 <li><a href="#">FAQ</a></li>
					 <li><a href="#">Shipping</a></li>
					 <li><a href="#">Cancellation</a></li>
					 <li><a href="#">Returns</a></li>
					 <li><a href="#">Bulk Orders</a></li>
					 <li><a href="#">Buying Guides</a></li>					 
				 </ul>
			 </div>
			 <div class="col-md-3 ftr-grid">
				 <h4>Your account</h4>
				 <ul>
					 <li><a href="account.html">Your Account</a></li>
					 <li><a href="#">Personal Information</a></li>
					 <li><a href="#">Addresses</a></li>
					 <li><a href="#">Discount</a></li>
					 <li><a href="#">Track your order</a></li>					 					 
				 </ul>
			 </div>
			 <div class="col-md-3 ftr-grid">
				 <h4>Categories</h4>
				 <ul>
					 <li><a href="#">> Wedding</a></li>
					 <li><a href="#">> Jewellerys</a></li>
					 <li><a href="#">> Shoes</a></li>
					 <li><a href="#">> Flowers</a></li>
					 <li><a href="#">> Cakes</a></li>
					 <li><a href="#">...More</a></li>					 
				 </ul>
			 </div>
			 <div class="clearfix"></div>
		 </div>		
	 </div>-->
</div>
<!---->s
 <div class="copywrite">
	<!---- <div class="container">
			  <p>Copyright © 2015 Wedding Store. All Rights Reserved | Design by <a href="http://w3layouts.com">W3layouts</a></p>
		 </div>-->
</div>	


<script>

	var accounts;
	
	const getMyAddress = async () => {
		if (typeof web3 !== 'undefined') {
			web3 = new Web3(web3.currentProvider);
		} else {
			// set the provider you want from Web3.providers
			web3 = new Web3(new Web3.providers.WebsocketProvider("ws://127.0.0.1:7545"));
		}
		 accounts = await web3.eth.getAccounts();
	//	document.getElementById("myaddr").innerHTML="Distributor Account: " + accounts[1];
	}
	
	const reloadTable = async () => {
		if (typeof web3 !== 'undefined') {
			web3 = new Web3(web3.currentProvider);
		} else {
			// set the provider you want from Web3.providers
			web3 = new Web3(new Web3.providers.WebsocketProvider("ws://127.0.0.1:7545"));
		}
	
		const networkId = await web3.eth.net.getId();
		const ethbayJson = await $.getJSON('../src/abis/SupplyChainCode.json')
		const deployedEthbay = new web3.eth.Contract(
			ethbayJson.abi,
			ethbayJson.networks[networkId].address
		);
	   // const totalItemNumber = await deployedEthbay.methods.totalNumber().call();
	   // alert(accounts[2]);
		// let items = await deployedEthbay.methods.productToComponentMapping("FormalShirt").call();
	  //  for (var i = 1;i<= totalItemNumber;i++) {
		  let total = await deployedEthbay.methods.retailerOrderNumber().call();
		let items = await deployedEthbay.methods.giveOrders(accounts[1],0).call();
		console.log("Running Line 2");
		console.log(total);
	
	
		//var table = $('#itemtable');
	//	table.find("tbody tr").remove();
	//	table.append('<tr><th><label class="btn btn-default control-label"> <b>Sr No</b></label></th><th><label class="btn btn-default control-label"> <b>Product</b></label></th><th><label class="btn btn-default control-label"> <b>Quantity</b></label></th><th><label class="btn btn-default control-label"> <b>Price</b></label></th><th><label class="btn btn-default control-label"> <b>Status</b></label></th></tr>');
	
		var i =0;
	//   while(true) {
		//let items = await deployedEthbay.methods.giveOrders(accounts[1],i).call();
	
	//	 table.append("<tr><td>" + i + "</td><td>" + items.name + "</td><td>" + items.quantity + "</td><td>" + items.orderPayment + "</td><td>" +items.status + "</td></tr>");
	//	 i++;
	//		};
	
			
	};
	
	$("#button3").click(async () => {
	
	//alert("hii")
	if (typeof web3 !== 'undefined') {
	web3 = new Web3(web3.currentProvider);
	} else {
	// Note: please use WebsocketProvider if you want to subscribe events
	web3 = new Web3(new Web3.providers.WebsocketProvider("ws://127.0.0.1:7545"));
	}
	//See? I am using the `id="itemid"` you saw above to access the content of user's input
	// const itemId = $("#itemid").val();
	let manuName= $("#manuName").val();
	// alert(id);
	// const rAddress= $("#retailerAddress").val();
	// const tAddress=$("#transporterAddress").val();
	const confirmedPriceEther = 1/100;
	const confirmedPriceWei = web3.utils.toWei(confirmedPriceEther.toString(), 'Ether');
	const accounts = await web3.eth.getAccounts();
	const Account = accounts[1];
	
	try {
	await web3.eth.personal.unlockAccount(Account, '', 1000);
	} catch (error) {
	console.log(error);
	}
	const networkId = await web3.eth.net.getId();
	const ethbayJson = await $.getJSON('../src/abis/SupplyChainCode.json')
	const address = ethbayJson.networks[networkId].address
	const deployedEthbay = new web3.eth.Contract(
	ethbayJson.abi,
	address
	);
	console.log(deployedEthbay)
	// alert("dsuh");
	//Estimate the gas consumption
	const gasAmount = await deployedEthbay.methods.signUp(manuName).estimateGas({from: Account})
//	alert("hi");
	try {
	const receipt = await deployedEthbay.methods.signUp(manuName).send({from: Account,gas: gasAmount})
	console.log("Receipt");
	console.log(receipt);
	window.location = "./Manufacturer.html";
	// const status = receipt.events.checkStockByCompany.returnValues.status.toString();
	// const inventory1 = receipt.events.checkStockByCompany.returnValues.productCount.toString();
	// const inventory2 = receipt.events.checkStockByCompany.returnValues.productCount2.toString();
	// const price = receipt.events.checkStockByCompany.returnValues.price.toString();
	
	const message = " Signup " + " successfully.";
	console.log(message);
	alert(message);
	} catch (error) {
	console.log('Transaction Error: ');
	console.log(error);
	}
	});
					/*(function() {
				
					// Create input element for testing
					var inputs = document.createElement('input');
					
					// Create the supports object
					var supports = {};
					
					supports.autofocus   = 'autofocus' in inputs;
					supports.required    = 'required' in inputs;
					supports.placeholder = 'placeholder' in inputs;
				
					// Fallback for autofocus attribute
					if(!supports.autofocus) {
						
					}
					
					// Fallback for required attribute
					if(!supports.required) {
						
					}
				
					// Fallback for placeholder attribute
					if(!supports.placeholder) {
						
					}
					
					// Change text inside send button on submit
					var send = document.getElementById('register-submit');
				//	if(send) {
				//		send.onclick = function () {
				//			this.innerHTML = '...Sending';
				//		}
				//}
	
				
				
				 })();-->*/
				 </script>
</body>
</html>